FROM pyenv-poetry:2.0

ONBUILD ARG PYTHON_VERSIONS_DEFAULT

ONBUILD ARG PYTHON_VERSIONS=${PYTHON_VERSIONS_DEFAULT:="3.6.15 3.7.12 3.8.12 3.9.7"}
ONBUILD ARG PYTHON_GLOBAL_VERSIONS_DEFAULT
ONBUILD ARG PYTHON_GLOBAL_VERSIONS=${PYTHON_GLOBAL_VERSIONS_DEFAULT:-$PYTHON_VERSIONS}

ONBUILD RUN for version in $PYTHON_VERSIONS; do pyenv install $version; done && pyenv global $PYTHON_GLOBAL_VERSIONS

ONBUILD CMD ["/bin/sh"]